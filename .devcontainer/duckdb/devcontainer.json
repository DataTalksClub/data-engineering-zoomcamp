{
  "name": "AE Homework: Local (DuckDB)",
  "build": {
    "dockerfile": "../Dockerfile",
    "context": "..",
    "args": {
      "BAKE_DATA": "true"
    }
  },
  "remoteUser": "vscode",
  "workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/data-engineering-zoomcamp,type=bind",
  "workspaceFolder": "/home/vscode/homework",
  "hostRequirements": {
    "cpus": 4,
    "memory": "16gb",
    "storage": "32gb"
  },
  "containerEnv": {
    "DBT_PROFILES_DIR": "/home/vscode/homework/profiles",
    "DBT_DUCKDB_PATH": "/home/vscode/homework/taxi_rides_ny.duckdb",
    "POETRY_VIRTUALENVS_CREATE": "false"
  },
  "postStartCommand": "bash /opt/devcontainer/duckdb/scripts/postCreate.sh",
  "features": {
    "ghcr.io/devcontainers/features/sshd:1": {
      "version": "latest"
    }
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "innoverio.vscode-dbt-power-user",
        "ms-python.python",
        "ms-python.black-formatter",
        "tamasfe.even-better-toml"
      ],
      "settings": {
        "python.defaultInterpreterPath": "/opt/venv/bin/python",
        "dbt.dbtPythonPath": "/opt/venv/bin/python",
        "dbt.executablePath": "/opt/venv/bin/dbt",
        "dbt.enableRunResultDecorations": true,
        "files.associations": {
          "*.sql": "jinja-sql"
        },
        "[python]": {
          "editor.defaultFormatter": "ms-python.black-formatter",
          "editor.formatOnSave": true
        },
        "github.copilot.chat.codeGeneration.instructions": [
          {
            "text": "This dev container is optimized for the Data Engineering Zoomcamp. It includes dbt-core and dbt-duckdb pre-installed in a virtual environment at `/opt/venv`."
          },
          {
            "text": "The workspace is isolated in `/home/vscode/homework`. Always run dbt commands from the root of this workspace."
          }
        ]
      }
    }
  }
}
